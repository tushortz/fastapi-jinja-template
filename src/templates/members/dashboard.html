{% extends "base.html" %}

{% block title %}Church Members Dashboard{% endblock %}
{% block page_title %}Members{% endblock %}

{% block content %}
<div class="space-y-6">

  <!-- Statistics Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <!-- Total Members -->
    <div class="bg-white shadow rounded-lg p-6">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <div class="w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center">
            <i class="fas fa-users text-white"></i>
          </div>
        </div>
        <div class="ml-4">
          <p class="text-sm font-medium text-gray-500">Total Members</p>
          <p class="text-2xl font-semibold text-gray-900">{{ stats.total_members }}</p>
        </div>
      </div>
    </div>

    <!-- Active Members -->
    <div class="bg-white shadow rounded-lg p-6">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <div class="w-8 h-8 bg-green-500 rounded-md flex items-center justify-center">
            <i class="fas fa-user-check text-white"></i>
          </div>
        </div>
        <div class="ml-4">
          <p class="text-sm font-medium text-gray-500">Active Members</p>
          <p class="text-2xl font-semibold text-gray-900">{{ stats.active_members }}</p>
        </div>
      </div>
    </div>

    <!-- Birthdays Today -->
    <div class="bg-white shadow rounded-lg p-6">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <div class="w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center">
            <i class="fas fa-birthday-cake text-white"></i>
          </div>
        </div>
        <div class="ml-4">
          <p class="text-sm font-medium text-gray-500">Birthdays Today</p>
          <p class="text-2xl font-semibold text-gray-900">{{ stats.birthdays_today }}</p>
        </div>
      </div>
    </div>

    <!-- Birthdays This Month -->
    <div class="bg-white shadow rounded-lg p-6">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <div class="w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center">
            <i class="fas fa-calendar-alt text-white"></i>
          </div>
        </div>
        <div class="ml-4">
          <p class="text-sm font-medium text-gray-500">Birthdays This Month</p>
          <p class="text-2xl font-semibold text-gray-900">{{ stats.birthdays_this_month }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Member Status Breakdown -->
  <div class="bg-white shadow rounded-lg p-6">
    <h2 class="text-lg font-semibold text-gray-900 mb-4">Member Status Breakdown</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      {% for status, count in stats.status_counts.items() %}
      <div class="text-center p-4 bg-gray-50 rounded-lg">
        <p class="text-2xl font-bold text-gray-900">{{ count }}</p>
        <p class="text-sm text-gray-600 capitalize">{{ status.replace('_', ' ') }}</p>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- Member Role Breakdown -->
  <div class="bg-white shadow rounded-lg p-6">
    <h2 class="text-lg font-semibold text-gray-900 mb-4">Member Role Breakdown</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
      {% for role, count in stats.role_counts.items() %}
      <div class="text-center p-4 bg-gray-50 rounded-lg">
        <p class="text-2xl font-bold text-gray-900">{{ count }}</p>
        <p class="text-sm text-gray-600 capitalize">{{ role.replace('_', ' ') }}</p>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- Birthdays Today -->
  {% if birthdays_today %}
  <div class="bg-white shadow rounded-lg p-6">
    <h2 class="text-lg font-semibold text-gray-900 mb-4">
      <i class="fas fa-birthday-cake text-yellow-500 mr-2"></i>Birthdays Today
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {% for member in birthdays_today %}
      <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <div class="w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center">
              <i class="fas fa-birthday-cake text-white"></i>
            </div>
          </div>
          <div class="ml-3">
            <p class="text-sm font-medium text-gray-900">{{ member.full_name }}</p>
            <p class="text-sm text-gray-500">
              {% if member.age %}
                {{ member.age }} years old
              {% endif %}
            </p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Birthdays This Month -->
  {% if birthdays_this_month %}
  <div class="bg-white shadow rounded-lg p-6">
    <h2 class="text-lg font-semibold text-gray-900 mb-4">
      <i class="fas fa-calendar-alt text-purple-500 mr-2"></i>Birthdays This Month
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {% for member in birthdays_this_month %}
      <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <div class="flex-shrink-0">
              <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center">
                <i class="fas fa-calendar-alt text-white"></i>
              </div>
            </div>
            <div class="ml-3">
              <p class="text-sm font-medium text-gray-900">{{ member.full_name }}</p>
              <p class="text-sm text-gray-500">
                {% if member.date_of_birth %}
                  {{ member.date_of_birth.strftime('%B %d') }}
                {% endif %}
                {% if member.age %}
                  ({{ member.age }} years old)
                {% endif %}
              </p>
            </div>
          </div>
          <div class="flex space-x-2">
            <a href="{{ url_for('view_member', member_id=member.id) }}"
               class="text-blue-600 hover:text-blue-800">
              <i class="fas fa-eye"></i>
            </a>
            <a href="{{ url_for('edit_member_form', member_id=member.id) }}"
               class="text-gray-600 hover:text-gray-800">
              <i class="fas fa-edit"></i>
            </a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Quick Actions -->
  <div class="bg-white shadow rounded-lg p-6">
    <h2 class="text-lg font-semibold text-gray-900 mb-4">Quick Actions</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      <a href="{{ url_for('create_member_form') }}"
         class="flex items-center p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors">
        <i class="fas fa-user-plus text-blue-600 mr-3"></i>
        <span class="text-blue-800 font-medium">Add New Member</span>
      </a>
      <a href="{{ url_for('members_list') }}"
         class="flex items-center p-4 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors">
        <i class="fas fa-list text-green-600 mr-3"></i>
        <span class="text-green-800 font-medium">View All Members</span>
      </a>
      <a href="{{ url_for('attendance_dashboard') }}"
         class="flex items-center p-4 bg-yellow-50 border border-yellow-200 rounded-lg hover:bg-yellow-100 transition-colors">
        <i class="fas fa-clipboard-check text-yellow-600 mr-3"></i>
        <span class="text-yellow-800 font-medium">Track Attendance</span>
      </a>
      <a href="{{ url_for('events_dashboard') }}"
         class="flex items-center p-4 bg-purple-50 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors">
        <i class="fas fa-calendar-plus text-purple-600 mr-3"></i>
        <span class="text-purple-800 font-medium">Manage Activities</span>
      </a>
    </div>
  </div>
</div>
{% endblock %}
